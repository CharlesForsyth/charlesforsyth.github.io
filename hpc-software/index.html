<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Software - Charles Forsyth</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Charles Forsyth</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">Home</a>
                            </li>
                            <li >
                                <a href="../cv/">CV</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">High Performance Computing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../hpc-home/">Intro</a>
</li>
                                    
<li >
    <a href="../hpc-linux/">Linux Basics</a>
</li>
                                    
<li >
    <a href="../hpc-hardware/">Hardware</a>
</li>
                                    
<li >
    <a href="../hpc-provisioning/">Provisioning</a>
</li>
                                    
<li >
    <a href="../hpc-architecture/">Architecture</a>
</li>
                                    
<li >
    <a href="../hpc-schedulers/">Schedulers</a>
</li>
                                    
<li class="active">
    <a href="./">Software</a>
</li>
                                    
<li >
    <a href="../hpc-code/">Code</a>
</li>
                                    
<li >
    <a href="../hpc-aws/">HPC in the Cloud</a>
</li>
                                    
<li >
    <a href="../hpc-monitoring/">Monitoring</a>
</li>
                                    
<li >
    <a href="../hpc-metrics/">Metrics</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../presentations/">My Presentations</a>
</li>
                                    
<li >
    <a href="../other-presentations/">Other Presentations</a>
</li>
                                    
<li >
    <a href="../project2/">Project 2</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../hpc-schedulers/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../hpc-code/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#hpc-software">HPC Software</a></li>
        <li class="main "><a href="#system-packages">System Packages</a></li>
        <li class="main "><a href="#c-c-c">C / C++ / C</a></li>
            <li><a href="#blast">BLAST</a></li>
        <li class="main "><a href="#python">Python</a></li>
            <li><a href="#conda">Conda</a></li>
            <li><a href="#jupyter-notebooks">Jupyter Notebooks</a></li>
            <li><a href="#dask">DASK</a></li>
            <li><a href="#gemma">Gemma</a></li>
            <li><a href="#rsd">RSD</a></li>
            <li><a href="#matplotlib">Matplotlib</a></li>
            <li><a href="#mothur">Mothur</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="hpc-software">HPC Software</h2>
<h2 id="system-packages">System Packages</h2>
<h2 id="c-c-c">C / C++ / C</h2>
<h4 id="blast">BLAST</h4>
<h5 id="blast-example">Blast Example</h5>
<h2 id="python">Python</h2>
<h3 id="conda">Conda</h3>
<p>This is one of the best package managers i have used. It has many uses in an HPC environment.</p>
<h4 id="conda-list-environments">Conda list environments</h4>
<pre><code class="bash">conda env list
</code></pre>

<h4 id="conda-create-new-environment-with-python-37">Conda - create new environment with python 3.7</h4>
<pre><code class="bash">conda create -y -n python3.7 python=3.7
</code></pre>

<h4 id="conda-create-new-environment-with-python-37-and-install-jupyter">Conda - create new environment with python 3.7 and install jupyter.</h4>
<pre><code class="bash">conda create -y -n jupyter python=3.7 jupyter
</code></pre>

<h4 id="conda-delete-environment">Conda - Delete environment</h4>
<pre><code class="bash">conda env remove -y -n python3.7
</code></pre>

<h4 id="conda-enable-conda-environment">Conda - Enable conda environment</h4>
<pre><code class="bash">source activate &lt;name-of-environment&gt;
</code></pre>

<h4 id="conda-disable-conda-environment">Conda - Disable conda environment</h4>
<pre><code class="bash">source deactivate
</code></pre>

<h3 id="jupyter-notebooks">Jupyter Notebooks</h3>
<p>The <a href="http://jupyter.org/">Jupyter Notebook</a> is an open-source web application that allows you to create and share documents that contain live code, equations, visualizations and narrative text. Uses include: data cleaning and transformation, numerical simulation, statistical modeling, data visualization, machine learning, and much more. </p>
<p>This can be installed on your local laptop or workstation.</p>
<p>These can also be used on many HPC Clusters which is exciting because there is often more software there and access to many more cpu and memory.</p>
<h4 id="installing-jupyter-notebooks">Installing Jupyter Notebooks</h4>
<p>If Anaconda is installed then Jupyter is all ready installed.</p>
<p>If just conda is installed than run the following to install Juypter Notebooks.</p>
<pre><code class="bash">conda create -y -n jupyter python=3.7 jupyter
source activate jupyter
</code></pre>

<h3 id="dask">DASK</h3>
<p>For the python ecosystem, consider using <a href="http://dask.pydata.org/en/latest/">Dask</a> which provides advanced parallelism for analytics. <a href="http://dask.pydata.org/en/latest/why.html">Why use Dask</a> versus (or along with) other options? Dask integrates with Numpy, Pandas, and Scikit-Learn, and it also:</p>
<ul>
<li><a href="http://dask.pydata.org/en/latest/why.html#scales-out-to-clusters">scales up to clusters</a> with multiple nodes</li>
<li><a href="https://dask-jobqueue.readthedocs.io/en/latest/">deployable on job queuing systems</a> like PBS, Slurm, MOAB, SGE, and LSF</li>
<li>also <a href="http://dask.pydata.org/en/latest/why.html#scales-down-to-single-computers">scales down to parallel usage of a single-node such as a server or laptop</a>  modern laptops often have a multi-core CPU, 16-32GB of RAM, and flash-based hard drives that can stream through data several times faster than HDDs or SSDs of even a year or two ago.</li>
<li>supports a <a href="http://dask.pydata.org/en/latest/why.html#supports-complex-applications">map-shuffle-reduce pattern</a> popularized by Hadoop and is a smaller, lightweight alternative to Spark.</li>
<li>works with <a href="http://dask.pydata.org/en/latest/setup/hpc.html#using-mpi">MPI via mpi4py library</a> and compatible with infiniband or other high speed networks.
See example <a href="https://dask-jobqueue.readthedocs.io/en/latest/#example">Dask Jobqueue for PBS cluster</a></li>
</ul>
<pre><code class="python">from dask_jobqueue import PBSCluster
cluster = PBSCluster()
cluster.scale(10)         # Ask for ten workers

from dask.distributed import Client
client = Client(cluster)  # Connect this local process to remote workers

# wait for jobs to arrive, depending on the queue, this may take some time

import dask.array as da
x = ...                   # Dask commands now use these distributed resources
</code></pre>

<h4 id="dask-on-hpc-presentation">Dask on HPC Presentation</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FXsgmwpRExM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="gemma">Gemma</h3>
<p><a href="https://github.com/genetics-statistics/GEMMA">Gemma Site</a></p>
<p>You can install this in your home directory.
The latest release comes as binary so no need to compile or anything.
Just download unpack and move the binary anywhere you want.</p>
<pre><code class="bash">wget https://github.com/genetics-statistics/GEMMA/releases/download/0.98.1/gemma-0.98.1-linux-static.gz
gzip -d gemma-0.98.1-linux-static.gz
chmod 755 gemma-0.98.1-linux-static
./gemma-0.98.1-linux-static
cp ./gemma-0.98.1-linux-static &lt;someplace&gt; (if you want to)
</code></pre>

<h3 id="rsd">RSD</h3>
<p><a href="https://github.com/todddeluca/reciprocal_smallest_distance">RSD site</a></p>
<p>Create a conda environment with your own version of python then load the prerequisite packagea and run the installer.
Commands:</p>
<pre><code class="bash">conda create -n rsd python=2.7.14
source activate rsd
module load ncbi-blast
module load paml
module load kalign
git clone https://github.com/todddeluca/reciprocal_smallest_distance
cd reciprocal_smallest_distance
python setup.py install
rsd_search -h
</code></pre>

<p>Then on subsequent logins or shells run the following to load up your RSD install.</p>
<pre><code class="bash">source activate rsd
module load ncbi-blast
module load paml
module load kalign
rsd_search -h
</code></pre>

<h3 id="matplotlib">Matplotlib</h3>
<p>This is a plotting package for python.</p>
<p>Install can be done through conda.</p>
<pre><code class="bash">conda create -n matplolib python=2.7.14 matplotlib
source activate matplotlib
</code></pre>

<p>When the system runs the sbatch job it spawns a new session and this session is not connected to your login session with the -XY.
This sbatch job doesn't have a $DISPLAY environment.
You can make some minor adjustments to your python code to use the Agg backend and this will allow you to not use a $DISPLAY and still save plots.</p>
<p>Example:</p>
<pre><code class="python">import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(range(10))
fig.savefig('temp.png')
</code></pre>

<h3 id="mothur">Mothur</h3>
<p><a href="https://www.mothur.org/">Mothur website</a></p>
<p>The latest release comes as binary so no need to compile or anything.
Just download and unpack the binary.</p>
<p>Example:</p>
<pre><code class="bash">wget https://github.com/mothur/mothur/releases/download/v1.41.3/Mothur.linux_64.zip
unzip Mothur.linux_64.zip
cd mothur/
./mothur -h
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
